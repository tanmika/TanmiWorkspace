---
id: tech_design
name: 技术设计
description: 从已有信息中提取和整理技术设计方案
type: summary
acceptanceCriteria:
  - when: 技术设计完成
    then: 包含架构设计、模块划分、接口定义
  - when: 输出设计文档
    then: 设计方案清晰，可直接指导开发
---

# 技术设计

## 执行步骤

1. **提取架构信息**
   - 从需求文档中识别核心模块
   - 从技术调研中确定技术选型
   - 梳理系统边界与依赖关系

2. **模块划分**
   - 按职责划分模块
   - 定义模块间关系
   - 识别共享组件

3. **接口设计**
   - 定义模块对外接口
   - 设计数据结构
   - 明确调用关系

4. **数据流设计**
   - 梳理关键流程
   - 绘制数据流向
   - 标注关键节点

5. **输出设计文档**
   - 按模板整理设计方案
   - 绘制架构图（文字描述或ASCII图）
   - 标注设计决策理由

## 检查清单

### 架构设计
- [ ] **系统边界**：系统负责什么、不负责什么？
- [ ] **核心模块**：有哪些主要模块？
- [ ] **模块职责**：每个模块的单一职责是什么？
- [ ] **技术选型**：使用哪些技术/框架？

### 接口设计
- [ ] **模块接口**：每个模块对外提供哪些接口？
- [ ] **数据结构**：关键数据结构定义？
- [ ] **调用关系**：模块间如何协作？
- [ ] **错误处理**：异常如何传递与处理？

### 数据流设计
- [ ] **关键流程**：核心业务流程有哪些？
- [ ] **数据流向**：数据如何在模块间流转？
- [ ] **状态管理**：状态如何存储与更新？
- [ ] **并发控制**：是否需要并发处理？

### 非功能设计
- [ ] **性能设计**：如何满足性能要求？
- [ ] **扩展性设计**：如何支持未来扩展？
- [ ] **容错设计**：如何处理失败场景？

## 输出模板

```markdown
## 设计概述
**设计目标**：[简述设计要解决的问题]
**技术选型**：[主要技术栈]
**设计原则**：[遵循的设计原则]

## 架构设计

### 系统架构图
\`\`\`
[ASCII架构图或文字描述]
┌─────────────┐
│  用户界面层  │
└──────┬──────┘
       │
┌──────▼──────┐
│  业务逻辑层  │
└──────┬──────┘
       │
┌──────▼──────┐
│  数据访问层  │
└─────────────┘
\`\`\`

### 模块划分
| 模块名称 | 职责 | 关键接口 |
|---------|------|----------|
| [模块1] | [职责描述] | [主要接口] |
| [模块2] | [职责描述] | [主要接口] |

## 核心模块设计

### 模块一：[模块名称]
**职责**：[单一职责描述]

**对外接口**：
\`\`\`typescript
interface ModuleInterface {
  method1(param: Type): ReturnType;
  method2(param: Type): ReturnType;
}
\`\`\`

**内部实现**：
- [关键实现逻辑1]
- [关键实现逻辑2]

**依赖关系**：
- 依赖：[依赖的其他模块]
- 被依赖：[依赖本模块的其他模块]

### 模块二：[模块名称]
[同上结构]

## 数据设计

### 核心数据结构
\`\`\`typescript
interface DataStructure {
  field1: Type;
  field2: Type;
}
\`\`\`

### 数据流转
\`\`\`
[关键流程的数据流向]
用户输入 → 验证 → 业务处理 → 持久化 → 返回结果
\`\`\`

## 接口定义

### API 接口（如有）
| 接口 | 方法 | 参数 | 返回 | 说明 |
|------|------|------|------|------|
| /api/xxx | POST | {...} | {...} | [功能说明] |

### 内部接口
\`\`\`typescript
// 关键内部接口定义
interface InternalAPI {
  // ...
}
\`\`\`

## 关键流程

### 流程一：[流程名称]
1. [步骤1]
2. [步骤2]
3. [步骤3]

**异常处理**：
- [异常场景1]：[处理方式]
- [异常场景2]：[处理方式]

## 非功能设计

### 性能设计
- [性能优化措施]
- [预期性能指标]

### 扩展性设计
- [扩展点设计]
- [插件机制（如有）]

### 容错设计
- [错误处理策略]
- [降级方案]

## 设计决策

### 决策一：[决策主题]
**问题**：[需要决策的问题]
**方案对比**：
- 方案A：[描述] - [优缺点]
- 方案B：[描述] - [优缺点]

**最终选择**：[选择的方案]
**理由**：[选择理由]

## 开发建议
- [开发顺序建议]
- [关键技术难点]
- [需要注意的事项]
```

## 验证规则

### 完整性检查
- 包含系统架构图
- 至少 3 个核心模块设计
- 每个模块有明确接口定义
- 至少 1 个关键流程说明

### 清晰性检查
- 模块职责单一明确
- 接口定义完整（参数、返回值）
- 数据流向清晰
- 设计决策有理由

### 可实施性检查
- 技术选型已确定
- 接口可直接编码实现
- 数据结构可直接定义
- 异常处理有明确方案

### 完成标准
- 所有核心模块已设计
- 接口定义完整
- 关键流程已梳理
- 设计方案经过评审确认
