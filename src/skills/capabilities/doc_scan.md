---
id: doc_scan
name: 文档扫描
description: 扫描项目文档和代码，提取关键信息
type: collection
acceptanceCriteria:
  - when: 文档扫描完成
    then: 提取项目结构、依赖、关键接口信息
  - when: 输出扫描报告
    then: 信息结构化，易于理解
---

# 文档扫描

## 执行步骤

1. **确定扫描目标**
   - 明确需要了解的信息类型
   - 列出需要扫描的文件/目录
   - 定义信息提取规则

2. **执行扫描**
   - 按优先级扫描文档
   - 提取关键信息
   - 记录文件位置

3. **整理信息**
   - 按类别分组
   - 去除重复信息
   - 标注信息来源

4. **输出报告**
   - 按模板整理
   - 标注不确定项
   - 提供文件链接

## 检查清单

### README 文档
- [ ] **项目简介**：项目是做什么的？
- [ ] **安装方式**：如何安装依赖？
- [ ] **启动方式**：如何运行项目？
- [ ] **项目结构**：目录结构说明？
- [ ] **配置说明**：需要配置什么？

### API 文档
- [ ] **接口列表**：有哪些API接口？
- [ ] **请求格式**：参数、请求体格式？
- [ ] **响应格式**：返回数据结构？
- [ ] **错误码**：错误码定义？
- [ ] **认证方式**：如何认证？

### 配置文件
- [ ] **环境变量**：需要哪些环境变量？
- [ ] **配置项**：有哪些配置选项？
- [ ] **默认值**：默认配置是什么？
- [ ] **示例配置**：有配置示例吗？

### 代码注释
- [ ] **模块职责**：各模块负责什么？
- [ ] **关键函数**：核心函数说明？
- [ ] **数据结构**：重要数据结构定义？
- [ ] **依赖关系**：模块间依赖？

### 依赖信息
- [ ] **核心依赖**：主要依赖库？
- [ ] **版本要求**：依赖版本限制？
- [ ] **开发依赖**：开发工具依赖？

## 扫描目标

### 优先级 P0（必须扫描）
1. **README.md** - 项目概览
2. **package.json / requirements.txt / pom.xml** - 依赖信息
3. **src/index.* / main.*** - 入口文件
4. **.env.example / config/*** - 配置示例

### 优先级 P1（重要）
5. **docs/** - 文档目录
6. **API.md / CHANGELOG.md** - API文档、变更日志
7. **src/types/** - 类型定义
8. **src/utils/** - 工具函数

### 优先级 P2（可选）
9. **tests/** - 测试文件（了解使用方式）
10. **.github/** - CI/CD 配置
11. **scripts/** - 脚本文件

## 信息提取规则

### 项目结构提取
- 读取根目录结构（depth=2）
- 识别主要目录用途（src/dist/docs/tests）
- 记录特殊目录（config/scripts）

### 依赖提取
- 从 package.json/requirements.txt 提取
- 区分生产依赖与开发依赖
- 记录版本约束

### 接口提取
- 从类型定义文件提取接口
- 从 API 文档提取接口说明
- 从代码注释提取函数签名

### 配置提取
- 从 .env.example 提取环境变量
- 从 config 文件提取配置项
- 从 README 提取配置说明

## 输出模板

```markdown
## 扫描概要
**扫描时间**：[时间]
**扫描范围**：[文件/目录列表]
**信息来源**：[主要参考文件]

## 项目概况

### 基本信息
- **项目名称**：[名称]
- **项目描述**：[简述]
- **主要技术栈**：[技术列表]
- **Node/Python/Java 版本**：[版本要求]

### 项目结构
\`\`\`
project/
├── src/           # [用途说明]
├── docs/          # [用途说明]
├── tests/         # [用途说明]
└── config/        # [用途说明]
\`\`\`

## 依赖信息

### 生产依赖
| 包名 | 版本 | 用途 |
|------|------|------|
| [package1] | [version] | [说明] |
| [package2] | [version] | [说明] |

### 开发依赖
| 包名 | 版本 | 用途 |
|------|------|------|
| [package1] | [version] | [说明] |

## 核心模块

### 模块一：[模块名]
**位置**：`src/module1/`
**职责**：[模块职责]
**关键文件**：
- `file1.ts` - [说明]
- `file2.ts` - [说明]

### 模块二：[模块名]
[同上结构]

## 关键接口

### 接口一：[接口名]
**定义位置**：`src/types/interface.ts:10`

\`\`\`typescript
interface InterfaceName {
  field1: Type;
  field2: Type;
}
\`\`\`

**用途**：[接口用途说明]

### API 接口（如有）
| 路径 | 方法 | 说明 | 定义位置 |
|------|------|------|----------|
| /api/xxx | GET | [说明] | `src/api/xxx.ts` |

## 配置说明

### 环境变量
| 变量名 | 默认值 | 说明 | 必需 |
|--------|--------|------|------|
| API_KEY | - | [说明] | ✅ |
| PORT | 3000 | [说明] | ❌ |

### 配置文件
- **config/app.json** - [用途]
- **.env.example** - [用途]

## 启动方式

### 安装依赖
\`\`\`bash
[安装命令]
\`\`\`

### 运行项目
\`\`\`bash
[运行命令]
\`\`\`

### 构建项目
\`\`\`bash
[构建命令]
\`\`\`

## 特殊说明
- [注意事项1]
- [注意事项2]

## 待确认项
- [ ] [不确定的信息1]
- [ ] [不确定的信息2]

## 参考文件
- [文件路径1] - [说明]
- [文件路径2] - [说明]
```

## 扫描技巧

### 快速定位
- 使用 `grep`/`rg` 搜索关键词
- 查看 git log 了解最近改动
- 检查 package.json 的 scripts 了解命令

### 代码阅读
- 从入口文件开始
- 跟踪主要函数调用链
- 关注类型定义文件

### 信息验证
- 交叉验证多个信息源
- 优先相信官方文档
- 代码实现 > 注释 > 文档

## 验证规则

### 完整性检查
- 项目基本信息完整
- 核心依赖已提取
- 主要模块已识别
- 启动方式已确认

### 准确性检查
- 信息有明确来源
- 版本号准确
- 文件路径正确
- 配置说明正确

### 可用性检查
- 信息结构化清晰
- 关键信息易于查找
- 提供足够上下文
- 标注不确定项

### 完成标准
- 所有 P0 目标已扫描
- 关键信息已提取
- 输出报告完整
- 待确认项已标注
