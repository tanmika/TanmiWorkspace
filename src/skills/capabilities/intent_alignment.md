---
id: intent_alignment
name: 意图对齐
description: 澄清用户意图，消除模糊性，确认可验证的验收标准
type: collection
acceptanceCriteria:
  - when: 识别模糊点完成
    then: 所有不明确之处已标记
  - when: 结构化提问完成
    then: 针对性问题已生成并获得用户回答
  - when: 验收标准确认
    then: 所有期望已转化为可验证的WHEN/THEN格式
  - when: 置信度检查
    then: 置信度≥80%或已反问用户
---

# 意图对齐

## 核心思维

**澄清 (Clarify)**：通过结构化提问消除需求中的模糊性，将用户意图转化为可验证的验收标准。

## 典型动作

- 问用户：针对模糊点提出澄清问题
- 确认验收标准：将期望转化为WHEN/THEN格式
- 置信度检查：低于80%必须反问

## 执行步骤 (SOP)

### 1. 识别模糊点

检查用户输入中的不明确之处：

- **主观描述**：形容词、副词（"快速"、"美观"、"大量"）
- **列举不全**：使用"等"、"之类"等模糊词
- **隐含假设**：未明确说明的前提条件
- **缺失信息**：未提及的关键要素（如错误处理、边界条件）

**输出**：模糊点清单

### 2. 结构化提问

针对识别出的模糊点生成澄清问题：

- **量化追问**："快速响应"→"期望响应时间是多少毫秒？"
- **完整性追问**："支持图片、视频等"→"等还包括哪些格式？"
- **假设确认**："用户登录后..."→"是否所有功能都需要登录？"
- **边界场景**："数据导入"→"导入失败如何处理？数据量上限是多少？"

**原则**：
- 一次提问不超过5个问题
- 优先级：核心功能 > 边界场景 > 非功能性需求
- 问题应具体、可回答

**输出**：澄清问题列表

### 3. 验收标准确认

将用户期望转化为可验证的WHEN/THEN格式：

```markdown
| WHEN（条件） | THEN（结果） |
|-------------|-------------|
| 用户点击导出按钮 | 3秒内生成CSV文件并弹出下载提示 |
| 数据量超过10万条 | 显示警告提示，分批导出 |
| 网络请求失败 | 显示错误信息，提供重试按钮 |
```

**要求**：
- 每条标准可独立测试
- THEN部分可观测、可量化
- 覆盖正常场景、边界场景、异常场景

**输出**：验收标准表格

### 4. 置信度检查

评估对需求的理解置信度：

- **≥80%**：可以进入下一阶段
- **<80%**：必须向用户反问

**置信度评估标准**：
- 核心功能清晰：+30%
- 验收标准完整：+30%
- 技术路径明确：+20%
- 边界场景清晰：+20%

**如果置信度<80%**：
1. 明确指出不确定的部分
2. 生成针对性问题
3. 等待用户回答后重新评估

**输出**：置信度百分比 + 不确定点列表（如有）

## 检查清单

### 核心要素
- [ ] **用户意图**：用户真正想解决的问题是什么？
- [ ] **成功标准**：如何判断需求已满足？
- [ ] **使用场景**：在什么情况下会使用这个功能？
- [ ] **期望结果**：用户期望看到什么结果？

### 边界与约束
- [ ] **输入限制**：数据类型、格式、大小限制
- [ ] **异常处理**：错误、超时、边界情况如何处理
- [ ] **性能要求**：响应时间、并发量、数据量级
- [ ] **兼容性**：需要支持的环境、浏览器、设备

### 验收标准
- [ ] **正常场景**：至少3条WHEN/THEN
- [ ] **边界场景**：数据为空、超大、特殊字符等
- [ ] **异常场景**：网络失败、权限不足、超时等

## 输出模板

```markdown
## 需求摘要
[一句话描述用户意图，50字以内]

## 用户故事
作为 [用户角色]，我希望 [功能描述]，以便 [业务价值]

## 验收标准
| WHEN（条件） | THEN（结果） |
|-------------|-------------|
| [触发条件1] | [期望结果1，可观测、可量化] |
| [触发条件2] | [期望结果2] |
| [异常条件] | [异常处理方式] |

## 功能细节
### 输入
- [输入项1]：类型、格式、限制（如：文件大小≤10MB）
- [输入项2]：类型、格式、限制

### 输出
- [输出项1]：格式、内容、响应时间
- [输出项2]：格式、内容

### 异常处理
- [异常场景1]：处理方式（如：显示错误提示，提供重试按钮）
- [异常场景2]：处理方式

## 约束条件
- 性能：[响应时间、并发量等]
- 兼容性：[支持的环境、浏览器等]
- 安全：[权限控制、数据加密等]

## 置信度评估
- 当前置信度：[XX%]
- 不确定点：
  - [ ] [不确定问题1]
  - [ ] [不确定问题2]
```

## 验证规则

### 完整性检查
- 需求摘要 ≤ 50字
- 至少1条用户故事
- 至少3条验收标准（包含正常+异常场景）
- 所有输入输出已明确类型和限制

### 清晰性检查
- 无未量化的主观形容词
- 无"等"、"之类"等模糊表述
- 所有隐含假设已明确确认

### 可验证性检查
- 每条验收标准可独立测试
- THEN部分可观测（UI变化、数据变化、日志输出等）
- 异常场景有明确处理方式

### 置信度检查
- 置信度 ≥ 80%
- 所有<80%的不确定点已向用户反问
- 用户已对最终验收标准确认

## 典型场景示例

### 场景1：模糊需求澄清

**用户输入**：
> 我想要一个快速导出数据的功能

**识别模糊点**：
- "快速"未量化
- "导出"格式未明确
- "数据"范围未限定
- 失败处理未提及

**结构化提问**：
1. 期望的响应时间是多少？（如3秒、10秒）
2. 导出的文件格式是？（CSV、Excel、JSON）
3. 需要导出哪些数据？数据量大概多少？
4. 如果导出失败应该如何提示用户？

### 场景2：隐含假设确认

**用户输入**：
> 用户登录后可以查看订单历史

**识别假设**：
- 是否所有功能都需要登录？
- 未登录用户访问会如何？
- 订单历史的时间范围？
- 是否支持搜索、筛选？

**结构化提问**：
1. 未登录用户访问该功能会如何处理？（跳转登录页/显示提示）
2. 订单历史显示多长时间内的订单？（最近1年/全部）
3. 是否需要支持按日期、状态筛选订单？
4. 单页显示多少条订单？是否支持分页？

## 注意事项

1. **不要假设**：任何不确定的地方都要明确询问用户
2. **量化优先**：将所有主观描述转化为可量化指标
3. **覆盖异常**：不仅关注正常流程，更要明确异常处理
4. **置信度把关**：<80%必须反问，不能带着疑问进入下一阶段
5. **用户确认**：最终的验收标准必须得到用户明确认可
