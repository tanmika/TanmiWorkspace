---
id: requirement_clarify
name: 需求澄清
description: 通过结构化提问澄清用户需求，消除歧义
type: collection
acceptanceCriteria:
  - when: 需求分析完成
    then: 需求描述清晰，无歧义点
  - when: 输出需求文档
    then: 包含用户故事、验收标准、约束条件
---

# 需求澄清

## 执行步骤

1. **识别需求类型**
   - 功能性需求：具体的功能点、操作流程
   - 非功能性需求：性能、安全、可用性等
   - 边界需求：不做什么、限制条件

2. **按必问清单逐项确认**
   - 逐条提问，等待用户回答
   - 对模糊回答追问细节
   - 记录所有确认结果

3. **检测歧义并追问**
   - 识别形容词、副词等主观描述
   - 发现隐含假设立即确认
   - 标记不确定项

4. **输出结构化文档**
   - 按输出模板整理信息
   - 标注待确认项
   - 请用户最终确认

## 检查清单

### 基础信息
- [ ] **用户角色**：谁会使用这个功能？
- [ ] **触发条件**：在什么情况下需要这个功能？
- [ ] **期望结果**：用户希望得到什么？
- [ ] **成功标准**：如何判断需求已满足？

### 约束条件
- [ ] **时间约束**：有截止日期吗？
- [ ] **资源约束**：有预算/人力限制吗？
- [ ] **技术约束**：必须使用特定技术吗？
- [ ] **兼容性约束**：需要兼容哪些环境？

### 参考与示例
- [ ] **参考案例**：有类似的产品/功能吗？
- [ ] **示例数据**：能提供示例输入输出吗？
- [ ] **异常场景**：边界情况如何处理？

## 歧义检测规则

### 量化检测
- **形容词无量化** → 追问具体数值
  - "快速响应" → "期望响应时间是多少毫秒？"
  - "大量数据" → "预期数据量级是多少？"

### 列举检测
- **"等"、"之类"** → 追问完整列表
  - "支持图片、视频等" → "等还包括哪些格式？"
  - "常见浏览器" → "具体指哪些浏览器及版本？"

### 假设检测
- **隐含假设** → 明确确认
  - "用户登录后..." → "是否所有功能都需要登录？"
  - "数据存储在..." → "存储位置、备份策略是什么？"

## 输出模板

```markdown
## 需求摘要
[一句话描述，50字以内]

## 用户故事
作为 [用户角色]，我希望 [功能描述]，以便 [业务价值]

## 验收标准
| WHEN（条件） | THEN（结果） |
|-------------|-------------|
| [触发条件1] | [期望结果1] |
| [触发条件2] | [期望结果2] |

## 功能细节
### 输入
- [输入项1]：[类型、格式、限制]
- [输入项2]：[类型、格式、限制]

### 输出
- [输出项1]：[格式、内容]
- [输出项2]：[格式、内容]

### 异常处理
- [异常场景1]：[处理方式]
- [异常场景2]：[处理方式]

## 约束条件
- [约束1]
- [约束2]

## 参考示例
[如有，提供截图、链接或文字描述]

## 待确认项
- [ ] [待确认问题1]
- [ ] [待确认问题2]
```

## 验证规则

### 完整性检查
- 需求摘要 ≤ 50 字
- 至少 1 条用户故事
- 至少 3 条验收标准
- 约束条件明确列出

### 清晰性检查
- 无主观形容词（或已量化）
- 无"等"、"之类"等模糊表述
- 所有假设已明确确认

### 可验证性检查
- 每条验收标准可测试
- 成功标准可量化判断
- 异常场景有明确处理方式

### 完成标准
- 所有必问清单项已回答
- 待确认项为空（或用户确认可跳过）
- 用户对最终文档已确认
